<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ClaimRoot Checkout - CodeFlow</title>

  <!-- PayPal SDK Script for Hosted Buttons -->
  <script 
    src="https://www.paypal.com/sdk/js?client-id=BAAGdPecRsf6dw_nIrWqUen0GdW0UsBZapp1Gn62xkPdD-Vqc-4lqWAidKK8LOObXux8pHJGjXknZoar6Q&components=hosted-buttons&disable-funding=venmo&currency=USD">
  </script>

  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #0f172a;
      color: #e2e8f0;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 2rem;
    }
    h1 {
      font-size: 2rem;
      margin-bottom: 1rem;
    }
    .vault-log {
      background: #1e293b;
      padding: 1rem;
      border-radius: 0.5rem;
      max-width: 600px;
      margin-top: 1.5rem;
      font-family: monospace;
      color: #00ffae;
      max-height: 300px;
      overflow-y: auto;
    }
    .paypal-button-container {
      margin: 2rem 0;
    }
    .pp-K9BPET82JDRQ4 {
      text-align: center;
      border: none;
      border-radius: 0.25rem;
      min-width: 11.625rem;
      padding: 0 2rem;
      height: 2.625rem;
      font-weight: bold;
      background-color: #FFD140;
      color: #000000;
      font-family: "Helvetica Neue", Arial, sans-serif;
      font-size: 1rem;
      line-height: 1.25rem;
      cursor: pointer;
    }
    .success { color: #00ffae; }
    .error { color: #ff6b6b; }
  </style>
</head>
<body>
  <h1>üß¨ ClaimRoot License &mdash; CodeFlow Checkout</h1>

  <!-- Hosted PayPal Button -->
  <div class="paypal-button-container">
    <div id="paypal-container-K9BPET82JDRQ4"></div>
  </div>

  <!-- Styled Single Button -->
  <form action="https://www.paypal.com/ncp/payment/K9BPET82JDRQ4" method="post" target="_blank" style="display:inline-grid;justify-items:center;align-content:start;gap:0.5rem;">
    <input class="pp-K9BPET82JDRQ4" type="submit" value="Buy Now" />
    <img src="https://www.paypalobjects.com/images/Debit_Credit_APM.svg" alt="cards" />
    <section style="font-size: 0.75rem;">
      Powered by <img src="https://www.paypalobjects.com/paypal-ui/logos/svg/paypal-wordmark-color.svg" alt="paypal" style="height:0.875rem;vertical-align:middle;" />
    </section>
  </form>

  <!-- VaultLevel 7 Verification Log -->
  <div class="vault-log" id="logBox">
    Initializing VaultMesh & TreatyFlame...<br/>
  </div>

  <script>
    paypal.HostedButtons({
      hostedButtonId: "K9BPET82JDRQ4",
    }).render("#paypal-container-K9BPET82JDRQ4");
  </script>

  <!-- VaultLevel 7 Logging & API Sync -->
  <script>
    const logBox = document.getElementById("logBox");

    function log(message) {
      logBox.innerHTML += `‚úÖ ${message}<br/>`;
      logBox.scrollTop = logBox.scrollHeight;
    }
    
    function error(message) {
      logBox.innerHTML += `<span class="error">‚ùå ${message}</span><br/>`;
      logBox.scrollTop = logBox.scrollHeight;
    }

    // Initialize VaultLevel 7 verification sequence
    setTimeout(() => {
      log("VaultLevel 7 initialization complete");
      log("TreatyFlame status: IGNITED üî•");
      
      // VaultMesh Pulse
      fetch("/api/faa/vaultmesh/pulse")
        .then(res => res.json())
        .then(data => {
          if (data.success) {
            log(`Scroll Validated ("success": true)`);
            log(`Checkout Verified ‚Äî VaultLevel 7`);
            log(`VaultMesh Pulse: {"brand_count":${data.vaultMesh.scrollsValidated},"platform_health":"OPERATIONAL","pulse_interval":"${data.vaultMesh.pulseInterval}","vault_status":"SEALED"}`);
          } else {
            error("VaultMesh pulse validation failed");
          }
        })
        .catch(err => error("Pulse Error: " + err.message));

      // Scroll validation
      setTimeout(() => {
        fetch("/api/faa/scroll/validate", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ scrollHash: "CURRENT_PLATFORM_HASH_" + Date.now() })
        })
          .then(res => res.json())
          .then(data => {
            if (data.success) {
              log(`TreatyFlame Ignited ‚Äî Digital Signature: ${data.validation.digitalSignature}`);
              log("ClaimRoot License: VERIFIED & TREATY-BOUND");
              log("üß¨ VaultLevel 7 Checkout: READY FOR PAYMENT");
            } else {
              error("Scroll validation failed");
            }
          })
          .catch(err => error("Scroll Validation Failed: " + err.message));
      }, 1500);
      
    }, 1000);
  </script>
</body>
</html>